# Application Blueprint: v0.5.0 (Operational Layer)

**Series Code**: `ARC01-OPER-01` **Status**: `Archived` (Released)

> **Spec Alignment:** This blueprint implements the **Student Progress Monitoring** requirements
> defined in the **[Internara Specs](../../internara-specs.md)** (Section 2). It provides the
> foundation for "Systematic tracking of student progress."

---

## 1. Version Goals and Scopes (Core Problem Statement)

**Purpose**: Implement high-frequency activity tracking systems (Journals and Attendance) and ensure
data is scoped by Academic Year for multi-year integrity.

**Objectives**:

- Provide students with a mechanism to record daily activities.
- Enable automated attendance monitoring for supervisors.
- Maintain data isolation between different internship cohorts.

**Scope**: The system has the structural foundation (Schools, Users), but lacks operational
tracking. There is no mechanism to record "what happened today" or to isolate data between different
academic periods.

---

## 2. Functional Specifications

**Feature Set**:

- **Journal System**: Daily student logbooks with draft support and dual-authority approval
  (Mentor/Teacher).
- **Attendance Tracking**: Check-in/out system with automated late status determination.
- **Academic Year Scoping**: Global scoping trait to ensure data remains relevant to the active
  cohort.
- **Media Support**: Secure attachment uploads for journal evidence.

**User Stories**:

- As a **Student**, I want to log my daily activities so that my supervisors can review my progress.
- As a **Mentor**, I want to see if my interns are present on-site today so that I can manage their
  schedule.
- As a **Teacher**, I want to approve weekly journals to verify competency achievements.

---

## 3. Technical Architecture (Architectural Impact)

**Modules**:

- **Journal**: New module for logbook entries and approval workflows.
- **Attendance**: New module for daily time-tracking.
- **Shared**: Enhanced with the `HasAcademicYear` concern for global scoping.

**Data Layer**:

- **Operational Tables**: `journal_entries` and `attendance_logs` using UUID primary keys.
- **Isolation**: References to Users and Placements use indexed UUIDs (no physical FKs).

**Settings**:

- Late thresholds and active academic years managed via the `setting()` helper.

---

## 4. UX/UI Design Specifications (UI/UX Strategy)

**Design Philosophy**: High-trust tracking with a mobile-first "Actionable" interface.

**User Flow**:

1. Student accesses the mobile dashboard and taps "Clock In."
2. System records the time and determines the status (Present/Late) based on global settings.
3. Throughout the day, the student logs activity in a draft Journal entry.
4. Student submits the Journal entry for the day.
5. Supervisor reviews the entry and marks it as Approved or Verified.
6. Once approved, the entry is locked and cannot be edited.

**Mobile-First**:

- "Clock In/Out" buttons are prominent on mobile screens.
- Journal forms support direct camera uploads for activity evidence.

**Multi-Language**:

- Status labels (Present, Late, Absent) and journal fields are localized in **Indonesian** and
  **English**.

---

## 5. Success Metrics (KPIs)

- **Tracking Consistency**: 90% of active interns submit at least 4 journal entries per week.
- **Data Integrity**: 0 cases of approved journals being modified post-approval.
- **Isolation**: 100% of queries correctly filter data by the active academic year.

---

## 6. Quality Assurance (QA) Criteria (Exit Criteria)

**Acceptance Criteria**:

- [x] **Immutable History**: Logic prevents updates to approved or verified journal entries.
- [x] **Secure Media**: Journal attachments are stored on private disks and accessible only via
      signed URLs.

**Testing Protocols**:

- [x] Unit tests for `HasAcademicYear` trait isolation.
- [x] Feature tests for double check-in prevention.

**Quality Gates**:

- [x] **Spec Verification**: Features match the "Student Progress Monitoring" requirements.
- [x] Static Analysis Clean.

---

## 7. vNext Roadmap (v0.6.0: Assessment & Workspaces)

- **Assessment Engine**: Grading and Certification logic.
- **Workspaces**: Dedicated UI modules for different user roles.
