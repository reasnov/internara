# Application Blueprint: v0.8.0 (Reporting & Intelligence)

**Series Code**: `ARC01-INTEL-01`
**Status**: `Planned`

---

## 1. Core Problem Statement

While v0.7.0 successfully automated data collection and basic compliance, the system currently lacks **high-level analytical synthesis**. Stakeholders (Principals, Department Heads, and Industry Partners) need aggregated reports rather than raw data views. 

Furthermore, the current "One-Student-One-Placement" model is too rigid for institutions requiring **rotational internships** or multiple placement history tracking.

**Goal**: Transform Internara from an "Orchestrator" to an "Intelligence Platform" capable of complex reporting and flexible assignment modeling.

---

## 2. Architectural Impact

### 2.1 Domain: Aggregated Reporting Engine (`modules/Report`)
*   **New Module**: A dedicated `Report` module to handle asynchronous PDF generation.
*   **Isolation Rule**: The `Report` module MUST NOT query other modules' tables directly. It will consume data via **Data Providers** defined in source modules.
*   **Performance**: All mass reporting (e.g., full class reports) must be handled via **Background Jobs** to prevent timeouts.

### 2.2 Domain: Flexible Placement History
*   **Refactor**: Modify the `Internship` module to support a "History of Placements" instead of a single active ID.
*   **Change Type**: **BREAKING CHANGE**. Existing single-placement data must be migrated to the new history table.
*   **Impact**: Enables students to participate in multiple short-term placements or "Rotation Magang" within a single academic period.

### 2.3 UI: Analytical Dashboards
*   **Feature**: visual data summaries (Charts/Stats) focused on **"At-Risk" identification**.
*   **Logic**: Highlighting students with < 80% attendance or > 3 missing journal entries at a glance.

### 2.4 Migration Strategy
*   **Plan**: Create a migration script to transition `internship_registrations.placement_id` data into a new `internship_placement_history` table.
*   **Fallback**: Maintain backward compatibility in Services during the transition phase.

---

## 3. Contract Definitions

| Contract | Owner Module | Consumer | Purpose |
| :--- | :--- | :--- | :--- |
| `ExportableDataProvider` | `Internship`, `Attendance` | `Report` | Standard interface for modules to provide structured datasets for PDF rendering. |
| `PlacementStrategy` | `Internship` | `Internship` | Logic to determine which placement is "Active" vs. "Historical". |
| `AnalyticsAggregator` | `Core` | `Admin` | Provides pre-aggregated institutional metrics (e.g. Total Active Interns, Partner Fill Rate). |

---

## 4. Exit Criteria

The v0.8.0 series is considered complete when:

- [ ] **Class-Level Reporting**: Teachers can generate a single PDF report for their entire class in one click.
- [ ] **Partner Analytics**: Admins can view engagement reports (responsiveness, feedback scores) per Industry Partner.
- [ ] **Placement Rotation**: The system supports assigning a student to a second placement after the first one ends.
- [ ] **Data Integrity**: Successful migration of legacy placement data to the new history model.
- [ ] **Queue Safety**: The system handles 100+ page report generation without memory leaks or HTTP timeouts.

---

## 5. vNext Roadmap (v0.9.0)

*   **Public API & Integration**: Preparing for External School Systems (SIS) integration.
*   **Mobile-First Experience**: Transitioning student journals to a dedicated mobile-optimized interface or PWA.
*   **Enhanced Audit Logs**: Expanding the tracking of administrative changes for higher accountability.