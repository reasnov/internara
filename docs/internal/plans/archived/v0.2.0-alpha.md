# Engineering Plan: v0.2.0 (Core Engine)

**Series Code**: `ARC01-CORE-01` **Status**: `Archived` (Released)

---

## 1. Core Problem Statement

Domain modules are starting to duplicate utility logic (UUID generation, Status handling).
Additionally, we lack a unified, portable way to handle authorization across module boundaries.

**Goal**: Establish the "Engine Room" (Shared & Core) to house universal concerns and RBAC
infrastructure.

---

## 2. Architectural Impact

### 2.1 Domain: Shared Utilities

- **New Module**: `Shared`.
- **Scope**: Business-agnostic traits (`HasUuid`, `HasStatuses`) and the `EloquentQuery` base
  service.

### 2.2 Domain: Portable RBAC

- **New Module**: `Permission`.
- **Scope**: Encapsulation of `spatie/laravel-permission` with UUID support.
- **Pattern**: Policy-based authorization where domain modules own the "Ability" definitions.

---

## 3. Contract Definitions

| Contract        | Owner Module | Consumer    | Purpose                                              |
| :-------------- | :----------- | :---------- | :--------------------------------------------------- |
| `EloquentQuery` | `Shared`     | All Domains | Standardizes CRUD operations and advanced filtering. |

---

## 4. Exit Criteria

The v0.2.0 series is considered complete when:

- [x] **Universal UUIDs**: All new models use the `HasUuid` trait by default.
- [x] **Base Service**: Domain services can extend `EloquentQuery` to inherit standard features.
- [x] **Isolated Permissions**: Authorization checks rely on standard Gates/Policies, not direct
      database queries.

---

## 5. vNext Roadmap (v0.3.0)

- **Identity System**: Building the User and Auth modules.
- **Profile Polymorphism**: Separating credentials from profile data.
