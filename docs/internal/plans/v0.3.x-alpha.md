# Engineering Plan: v0.3.x (ARC01-USER-01)

**Series Code**: `ARC01-USER-01` **Status**: `Released` (Alpha Milestone)

This plan focused on stabilizing Internara's identity system. We implemented comprehensive user
management and decoupled role-specific data from core authentication credentials.

---

## 1. Architectural Strategy: Profile Polymorphism

To ensure the core `User` model remained lean, we moved extended attributes into the `Profile`
module.

- **Mechanism**: Use the `HasUserRelation` **Concern** to establish relationships without direct
  cross-module dependencies.
- **Isolation**: The `User` module MUST NOT reference `Profile` models; all communication happens
  via **Contracts**.

---

## 2. Implementation Keystones

### 2.1 Specialized Identity Onboarding

We enhanced the `UserService` to handle automated profile initialization.

- **Features**: Support for **NISN** (Students) and **NIP** (Teachers) stored in separate tables.
- **Onboarding**: Customized email verification flows and "Self-Service" profile dashboards built
  with Livewire.

### 2.2 Security Hardening & Privacy

- **Safeguards**: Implemented `Gate::before` and `UserPolicy` logic to prevent accidental deletion
  of the SuperAdmin account.
- **Privacy**: Integrated PII masking in application logs to ensure that email addresses are
  redacted automatically.

---

## 3. QA & Strategy

### 3.1 Verification Analysis

- **Flow Tests**: 100% pass rate for Registration and Verification sequences.
- **Integrity Audit**: Remedied an authentication bypass vulnerability within the verification
  logic.

### 3.2 Roadmap Strategy (vNext)

The next milestone (**v0.4.x**) will build the **Institutional** foundation (Schools & Departments)
to provide the necessary academic context for these user profiles.
