# Overview: Version v0.4.x-alpha (Institutional)

## 1. Version Details

- **Name**: `v0.4.0-alpha`
- **Series Code**: `ARC01-INST`
- **Status**: `Released`
- **Description**: This version focuses on establishing the academic and institutional foundation of
  the system, including School management, Departments, and the core Internship registration
  mechanisms.

---

## 2. Goals & Architectural Philosophy (Pre-Production)

### Problem Keypoints

- **Lack of Institutional Context:** The system currently lacks the concept of a School/Department
  to which students and teachers belong.
- **Manual Slot Management:** Internship placements are not yet tracked or limited by quota.
- **Single-Language UI:** Need for a robust UI mechanism to switch between English and Indonesian.

### Architectural Pillars

- **Institutional Hierarchy:** Defining a clear relationship between the School and its Departments.
- **Capacity Tracking:** Implementing slot-based registration to prevent over-allocation.
- **Profile Integration:** Linking User profiles to their respective academic structures (Student ->
  Department).

### Architectural Constraints (The Rules)

1.  **Strict Modular Boundaries:** The `School` and `Department` modules must remain portable and
    communicative only via established patterns.
2.  **Resource Ownership:** Institutional data must be manageable only by authorized administrative
    accounts.
3.  **Localization-First UI:** All new institutional forms and displays must use translation keys
    from day one.

---

## 3. System Keystones (Production)

### Format B: System Keystones (Features)

#### Keystone 1: The School Module

- **Goal**: To establish the institutional identity of the platform.
- **Implementation**: Implementation of school name, logo (MediaLibrary integration), contact, and
  address management. Full CRUD with `SchoolManager` and authorization via `SchoolPolicy`.
- **Developer Impact**: Provides a centralized source for branding and institutional data.

#### Keystone 2: The Department Module

- **Goal**: To manage the academic structures within the school.
- **Implementation**: Full administrative management of academic departments using
  `DepartmentManager`. Migrated primary keys to UUID for security and consistency.
- **Developer Impact**: Enables filtering and management of students based on their academic field.

#### Keystone 3: Internship Registration Foundation

- **Goal**: To facilitate the core business process of student placement.
- **Implementation**: Implemented `InternshipPlacement` and `InternshipRegistration` models.
  Established `InternshipPlacementService` and `InternshipRegistrationService` to manage industry
  slots and student applications.
- **Developer Impact**: Moves the system from pure administrative management to operational utility
  with capacity tracking.

#### Keystone 4: UI & Localization Refinements

- **Goal**: To ensure the system is accessible to the target local demographic.
- **Implementation**: Developed a global `LanguageSwitcher` Livewire component. Implemented
  `SetLocale` middleware in the `Core` module to persist user language preferences via session.
- **Developer Impact**: Enforces i18n best practices and allows real-time UI localization testing.

#### Keystone 5: Setting Infrastructure Refinement

- **Goal**: To provide a robust and fail-safe setting management system.
- **Implementation**: Refactored the `setting()` helper function. Implemented a direct-read fallback
  in the `Core` module using `modules_statuses.json` to prevent collisions and fatal errors during
  early bootstrapping.
- **Developer Impact**: Eliminates dependency-order issues and provides a consistent API for
  configuration retrieval.

#### Keystone 6: Profile & Academic Integration

- **Goal**: To link users (students/teachers) to their respective institutional structures.
- **Implementation**: Added `department_id` to the `Profile` model. Established a modular
  relationship using `HasDepartmentRelation` trait, enabling Profiles to belong to a Department via
  the Service pattern.
- **Developer Impact**: Provides role-based institutional context, allowing the system to track
  which department a student or teacher belongs to.

#### Keystone 7: Decoupled Database Schema Refactor

- **Goal**: To achieve true database-level isolation between modules by removing physical foreign
  key constraints across module boundaries.

- **Implementation**: Identified and removed `constrained()` calls in migrations that link tables
  from different modules. Replaced them with manual indexes. Integrity is shifted to the Application
  Layer (Models/Services).

- **Developer Impact**: Eliminates cross-module migration dependencies and allows modules to be
  truly portable and independently deployable.

---

## 4. Quality Assurance & Finalization (Post-Production)

### 4.1. Quality Tooling & Tests

- [x] Pest test coverage for `SchoolManager`.
- [x] Pest test coverage for `DepartmentManager`.
- [x] Pest test coverage for `LanguageSwitcher`.
- [x] Pest test coverage for Profile-Department integration.
- [x] Automated linting and formatting via Prettier/Pint.

### 4.2. Verification Checks

- [x] **Institutional Management Test:** Verify Admin can manage School and Department data.
- [x] **Registration Schema Test:** Verify placements and registrations link correctly to UUIDs.
- [x] **Academic Integration Test:** Verify Profiles can correctly store and retrieve
      `department_id`.
- [x] **Multi-language Test:** Verify UI remains consistent across EN and ID locales.

### 4.3. Documentation Integrity

- [x] New modules documented in `docs/main/modules/` (Stub).
- [x] `README.md`, `CHANGELOG.md`, and `SECURITY.md` updated.
- [x] Root TOC and Module TOCs updated.
- [x] Formalized `release-guidelines.md` and `development-lifecycle-guide.md` overhaul.

### 4.4. Security Audit

- [x] **UUID Migration:** Reduced IDOR risk for Schools, Departments, and Internship entities.
- [x] **Relational Security:** Enforced `nullOnDelete` for `department_id` in profiles to prevent
      orphan data issues while maintaining profile integrity.
- [x] **RBAC Enforcement:** Explicit Policies for all new domain models.
- [x] **Automated Registration:** Implemented automated Policy registration in
      `ManagesModuleProvider`.
- [x] **Global Model Aliases:** Centralized model resolution.

### 4.5. Roadmap & Next Steps (v0.5.x-alpha)

#### Must Have

- **Daily Journal (Logbook)** system.
- **Attendance System** with geolocation support.
- **Supervisor Matching** for Students and Teachers.
- **UI Component Refactor:** Create wrapper components in the `UI` module for all external UI
  libraries (MaryUI/DaisyUI) to ensure all modules reference the `UI` module as the single point of
  control.

#### Should Have

- **Document Template Engine** for internship letters.
- **Email Notifications** for journal reminders.

#### Won't Have

- **Final Assessment Engines:** Deferred to v0.6.x.
- **Certificate Generation:** Deferred to v0.6.x.

---

**Navigation**

[‚Üê Previous: v0.3.x-alpha (User & Auth)](v0.3.x-alpha.md)
