# Release Note: v0.9.0

**Series Code:** `ARC01-BOOT-01` | **Stage:** Alpha | **Status:** In Progress

> **Spec Milestone:** This release implements the **Platform and Technology** (Section 5) and
> **Administrative Management** (Section 1) requirements of the
> **[Internara Specs](../../internara-specs.md)**.

---

## ðŸš€ Overview

Version **v0.9.0** focuses on reducing deployment friction. We are introducing the **Setup** module
for automated environment initialization.

---

## âœ¨ Features

### ðŸ› ï¸ Zero-Config Initialization (`Setup` Module)

- **Automated Installer:** A new `app:install` CLI command to handle migrations, seeding, and
  environment validation.
- **Web Setup Wizard:** A first-run interface for managing institutional branding (`brand_name`,
  `brand_logo`) and initial administrator setup.
- **System/SMTP Configuration:** Guided setup for mail and system-wide configurations within the
  wizard.
- **Installer Service:** Orchestrates technical bootstrapping steps via the `InstallerService`
  contract.

### ðŸ§¹ Technical Refinement

- **ServiceProvider Standardization:** Refactored core and operational module service providers
      (`UI`, `Auth`, `Log`, `Setting`, `Assessment`) to use standardized lifecycle methods from the
      `ManagesModuleProvider` trait, reducing boilerplate and ensuring consistent boot behavior.
- **Full Internationalization (i11n):** Refactored the `Setup` module to eliminate hardcoded
      strings. Introduced comprehensive translation files (`wizard.php`) for both **Indonesian** and
      **English**, ensuring compliance with the project's multi-language mandate.
- **Modular Slot Synchronization:** Fixed a critical issue where the `Department` and
      `Internship` modules failed to register their management components into the Setup Wizard
      slots.
- **Component Architecture Fix:** Resolved a view-reference mismatch in the `Auth` module by
      synchronizing the `RegisterSuperAdmin` component with its correctly named view and localizing
      its entire form interface.
- **UX Consistency:** Standardized step counters and localized dynamic options (e.g., Semester
      terms) across the initialization flow.
- **Infrastructure Hardening (Genesis Fix):** Enhanced the `ManagesModuleProvider` trait with strict
  typing and improved recursive configuration merging.
- **ESM Asset Loading:** Fixed the `vite-module-loader.js` to ensure compatibility with Node.js ES
  Modules, preventing build failures in modern environments.
- **Base Service Security:** Hardened the `EloquentQuery` base service to enforce mass-assignment
  filtering and ensure update operations strictly respect query scoping.
- **Unified Error Handling:** Centralized database exception management within the base service
  layer, reducing code redundancy and improving error traceability across all domain services.

---

## ðŸ›  Changelog

### **Security & Infrastructure**
- **feat(setup):** Implemented `SystemAuditor` service for deep environment validation (PHP extensions, directory permissions, and database connectivity).
- **feat(setup):** Hardened `ProtectSetupRoute` middleware with dual-layer validation (Session + Database-stored token check).
- **refactor(setup):** Unified lockdown behavior across security middleware using `abort(404)` to hide setup routes post-installation.
- **refactor(setup):** Migrated setup wizard state persistence from volatile Sessions to the permanent `Setting` module (database).

### **CLI & Automation**
- **refactor(setup):** Enhanced `app:install` command to utilize `SystemAuditor`, providing granular feedback on failed environment checks.
- **fix(setup):** Standardized CLI installation workflow to ensure consistent environment file and app key generation.

### **Web Setup Wizard**
- **feat(setup):** Expanded the Web Wizard to an **8-step flow**, introducing the re-active **Environment Check** step.
- **refactor(setup):** Re-ordered initialization sequence (**School -> Account**) to ensure Super-Administrator records are contextualized by institutional data.
- **fix(setup):** Synchronized all Livewire components (`SetupWelcome`, `SchoolSetup`, etc.) to adhere to the revised 8-step sequence.
- **docs(setup):** Fully localized the 8-step wizard interface in both Indonesian and English.

### **Testing & Quality**
- **test(setup):** Added dedicated unit tests for security middleware (`ProtectSetupRoute`, `RequireSetupAccess`).
- **test(setup):** Implemented comprehensive unit tests for `SystemAuditor`.
- **test(setup):** Refactored `SetupServiceTest` and `InstallerServiceTest` to use strict Mockery isolation.
- **test(setup):** Updated `SetupFlowTest` feature test to verify the complete 8-step initialization cycle.
